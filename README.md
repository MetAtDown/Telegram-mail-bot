# –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ Email –≤ Telegram

[![Python](https://img.shields.io/badge/Python-3.13%2B-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—á—Ç–æ–≤–æ–≥–æ —è—â–∏–∫–∞ –∏ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –ø–∏—Å–µ–º –≤ Telegram –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–µ–º–µ –ø–∏—Å—å–º–∞. –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ç–µ–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úâÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—á—Ç—ã —á–µ—Ä–µ–∑ IMAP (Yandex, Gmail –∏ –¥—Ä.)
- üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∏—Å–µ–º –ø–æ —Ç–µ–º–µ
- üì± –ü–µ—Ä–µ—Å—ã–ª–∫–∞ –ø–∏—Å–µ–º –≤ Telegram —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
- üë• –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- üõ†Ô∏è –£—Ç–∏–ª–∏—Ç–∞ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.13 –∏–ª–∏ –Ω–æ–≤–µ–µ
- –î–æ—Å—Ç—É–ø –∫ –ø–æ—á—Ç–æ–≤–æ–º—É –∞–∫–∫–∞—É–Ω—Ç—É —Å IMAP
- Telegram Bot Token

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/MetAtDown/Telegram-mail-bot.git
   cd Telegram-mail-bot
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã `scripts\:` `win_start_system.bat` or `linux_start_system.sh`):
   ```bash
   python -m venv .venv
   ```
   
   
      win –∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:
      ```
      source .venv/Scripts/activate
      ```
      linux –∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:
      ```
      source .venv/bin/activate
      ```


4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

5. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```
   # Database settings
   DATABASE_PATH=data/email_bot.db # –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å
   
   # Email settings
   EMAIL_ACCOUNT=example@yandex.ru # –ü–æ—á—Ç–∞ –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ø–∏—Å—å–º–∞
   EMAIL_PASSWORD=imap-pass # –ü–∞—Ä–æ–ª—å –Ω–µ –æ—Ç —Å–∞–º–æ–π –ø–æ—á—Ç—ã, –∞ –æ—Ç imap –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π –ø–æ—á—Ç–µ
   
   # Telegram settings
   TELEGRAM_TOKEN=your-telegram-bot-token # —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

   # Web admin settings
   ADMIN_USERNAME=log-admin # –ª–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É
   ADMIN_PASSWORD=log-pass # –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É 
   SECRET_KEY=random-secret-key # secret key
   
   # System settings
   LOG_LEVEL=INFO # –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –≤—ã–±—Ä–∞—Ç—å ERROR, WARNING, DEBUG
   CHECK_INTERVAL=5 # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—á—Ç—ã, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è –Ω–∞ 5 –º–∏–Ω.
   ```


## –ó–∞–ø—É—Å–∫

–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π:
```bash
python run_tools.py --help
```
–ò –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É:
```bash
python run_tools.py system start
```
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Å–º. —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞)

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: 
```
http://localhost:5000
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –≤—ã–π—Ç–∏ –∏–∑ –æ–±–æ–ª–æ—á–∫–∏, —É–∫–∞–∑–∞–≤ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ `n` (–Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞). –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–æ–π.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

1. –í–æ–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `.env`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —É–∫–∞–∑–∞–≤ Chat ID –≤ Telegram
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–µ–º—ã/—à–∞–±–ª–æ–Ω—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI

–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã:
```bash
python run_tools.py system status
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ CLI:
```bash
python run_tools.py admin add-user 123456789 --status Enable
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
python run_tools.py admin add-subject 123456789 "–í–∞–∂–Ω—ã–π –æ—Ç—á–µ—Ç"
```

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞:
```bash
python run_tools.py system shell
```

### –ö–æ–º–∞–Ω–¥—ã Telegram-–±–æ—Ç–∞

- `/start` - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
- `/status` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–π —Å—Ç–∞—Ç—É—Å –∏ —Å–ø–∏—Å–æ–∫ —Ç–µ–º
- `/reports` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ç–µ–º
- `/enable` - –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `/disable` - –û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `/help` - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Telegram_Mail-Bot/
‚îú‚îÄ‚îÄ data/                         # Data files directory
‚îú‚îÄ‚îÄ docs/                         # Documentation
‚îú‚îÄ‚îÄ logs/                         # Log files directory
‚îú‚îÄ‚îÄ scripts/                      # Scripts directory
‚îú‚îÄ‚îÄ src/                          # Source code
‚îÇ   ‚îú‚îÄ‚îÄ cli/                      # Command line interface components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tools.py
‚îÇ   ‚îú‚îÄ‚îÄ config/                   # Configuration files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ core/                     # Core functionality
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot_status.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email_handler.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ system.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ db/                       # Database operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tools.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/                    # Utility functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache_manager.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.py
‚îÇ   ‚îî‚îÄ‚îÄ web/                      # Web interface
‚îÇ       ‚îú‚îÄ‚îÄ static/               # Static assets
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ img/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ manifest.webmanifest
‚îÇ       ‚îú‚îÄ‚îÄ templates/            # HTML templates
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ includes/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ header.html
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sidebar.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 404.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ 500.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ add_user.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ bot_status.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ confirm_bulk_subjects.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ confirm_duplicate_subject.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ confirm_edit_subject.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ help.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ sql_console.html
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ user_details.html
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ users.html
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ .env                          # Environment variables
‚îú‚îÄ‚îÄ .gitignore                    # Git ignore file
‚îú‚îÄ‚îÄ LICENSE                       # License file
‚îú‚îÄ‚îÄ README.md                     # Project documentation
‚îú‚îÄ‚îÄ requirements.txt              # Python dependencies
‚îî‚îÄ‚îÄ run_tools.py                  # Tool runner script

```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ –ª–æ–≥–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
python run_tools.py system status --detailed

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
python run_tools.py system errors

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
python run_tools.py system check-connections
```
