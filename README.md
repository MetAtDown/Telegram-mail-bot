# ะกะธััะตะผะฐ ะฟะตัะตััะปะบะธ Email ะฒ Telegram

[![Python](https://img.shields.io/badge/Python-3.13%2B-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

ะกะธััะตะผะฐ ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะฟะพััะพะฒะพะณะพ ััะธะบะฐ ะธ ะฟะตัะตััะปะบะธ ะฟะธัะตะผ ะฒ Telegram ะฝะฐ ะพัะฝะพะฒะต ัะธะปัััะฐัะธะธ ะฟะพ ัะตะผะต ะฟะธััะผะฐ. ะะพะทะฒะพะปัะตั ะฝะฐัััะฐะธะฒะฐัั ะธะฝะดะธะฒะธะดัะฐะปัะฝัะต ัะธะปัััั ัะตะผ ะดะปั ัะฐะทะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน Telegram.

## ะะพะทะผะพะถะฝะพััะธ

- โ๏ธ ะะฒัะพะผะฐัะธัะตัะบะธะน ะผะพะฝะธัะพัะธะฝะณ ะฟะพััั ัะตัะตะท IMAP (Yandex, Gmail ะธ ะดั.)
- ๐ ะคะธะปัััะฐัะธั ะฟะธัะตะผ ะฟะพ ัะตะผะต
- ๐ฑ ะะตัะตััะปะบะฐ ะฟะธัะตะผ ะฒ Telegram ั ะฒะปะพะถะตะฝะธัะผะธ
- ๐ฅ ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะธะฝะดะธะฒะธะดัะฐะปัะฝัะผะธ ัะธะปัััะฐะผะธ
- ๐ฅ๏ธ ะะตะฑ-ะธะฝัะตััะตะนั ะฐะดะผะธะฝะธัััะฐัะพัะฐ
- ๐๏ธ ะฃัะธะปะธัะฐ ะบะพะผะฐะฝะดะฝะพะน ัััะพะบะธ ะดะปั ัะฟัะฐะฒะปะตะฝะธั
- ๐ ะะพะฝะธัะพัะธะฝะณ ัะฐะฑะพัั ัะธััะตะผั

## ะขัะตะฑะพะฒะฐะฝะธั

- Python 3.13 ะธะปะธ ะฝะพะฒะตะต
- ะะพัััะฟ ะบ ะฟะพััะพะฒะพะผั ะฐะบะบะฐัะฝัั ั IMAP
- Telegram Bot Token

## ะฃััะฐะฝะพะฒะบะฐ

1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:
   ```bash
   git clone git clone https://github.com/MetAtDown/Telegram-mail-bot.git
   cd Telegram-mail-bot
   ```

2. ะกะพะทะดะฐะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ัะฐะฑะพัั `scripts\:` `win_start_system.bat` or `linux_start_system.sh`):
   ```bash
   python -m venv .venv
   ```
   
   
      win ะฐะบัะธะฒะฐัะธั ะพะบััะถะตะฝะธั:
      ```
      source .venv/Scripts/activate
      ```
      linux ะฐะบัะธะฒะฐัะธั ะพะบััะถะตะฝะธั:
      ```
      source .venv/bin/activate
      ```


4. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
   ```bash
   pip install -r requirements.txt
   ```

5. ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:
   ```
   # Database settings
   DATABASE_PATH=data/email_bot.db # ะะพะถะฝะพ ะพััะฐะฒะธัั ะบะฐะบ ะตััั
   
   # Email settings
   EMAIL_ACCOUNT=example@yandex.ru # ะะพััะฐ ะฝะฐ ะบะพัะพัะพะน ะฑัะดัั ะฟัะพะฒะตัััััั ะฟะธััะผะฐ
   EMAIL_PASSWORD=imap-pass # ะะฐัะพะปั ะฝะต ะพั ัะฐะผะพะน ะฟะพััั, ะฐ ะพั imap ะดะพัััะฟะฐ ะบ ััะพะน ะฟะพััะต
   
   # Telegram settings
   TELEGRAM_TOKEN=your-telegram-bot-token # ัะพะบะตะฝ ะฑะพัะฐ

   # Web admin settings
   ADMIN_USERNAME=log-admin # ะปะพะณะธะฝ ะดะปั ะฒัะพะดะฐ ะฒ ะฐะดะผะธะฝะบั
   ADMIN_PASSWORD=log-pass # ะฟะฐัะพะปั ะดะปั ะฒัะพะดะฐ ะฒ ะฐะดะผะธะฝะบั 
   SECRET_KEY=random-secret-key # secret key
   
   # System settings
   LOG_LEVEL=INFO # ะะพะถะฝะพ ัะฐะบะถะต ะฒัะฑัะฐัั ERROR, WARNING, DEBUG
   CHECK_INTERVAL=5 # ะะฝัะตัะฒะฐะป ะฟัะพะฒะตัะบะธ ะฟะพััั, ัะตััะธัะพะฒะฐะปัั ะฝะฐ 5 ะผะธะฝ.
   ```


## ะะฐะฟััะบ

ะะทะฝะฐะบะพะผััะตัั ั ะธะฝััััะบัะธะตะน:
```bash
python run_tools.py --help
```
ะ ะทะฐะฟััะบะฐะนัะต ัะธััะตะผั:
```bash
python run_tools.py system start
```
ะะพัะปะต ะทะฐะฟััะบะฐ ะฒัะต ะฝัะถะฝัะต ัะฐะนะปั ัะพะทะดะฐะดัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ (ัะผ. ััััะบัััะฐ ะฟัะพะตะบัะฐ)

ะะตะฑ-ะธะฝัะตััะตะนั ะฐะดะผะธะฝะธัััะฐัะพัะฐ ะฑัะดะตั ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั: 
```
http://localhost:5000
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะฐัััะพะนะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ัะธะปัััะพะฒ

1. ะะพะนะดะธัะต ะฒ ะฒะตะฑ-ะธะฝัะตััะตะนั ะฐะดะผะธะฝะธัััะฐัะพัะฐ ั ััะตัะฝัะผะธ ะดะฐะฝะฝัะผะธ ะธะท `.env`
2. ะะตัะตะนะดะธัะต ะฒ ัะฐะทะดะตะป "ะะพะปัะทะพะฒะฐัะตะปะธ" ะธ ะดะพะฑะฐะฒััะต ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั, ัะบะฐะทะฐะฒ Chat ID ะฒ Telegram
3. ะัะบัะพะนัะต ัััะฐะฝะธัั ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ะดะพะฑะฐะฒััะต ัะตะผั/ัะฐะฑะปะพะฝั ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั

### ะัะฟะพะปัะทะพะฒะฐะฝะธะต CLI

ะัะพัะผะพัั ััะฐัััะฐ ัะธััะตะผั:
```bash
python run_tools.py system status
```

ะะพะฑะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ัะตัะตะท CLI:
```bash
python run_tools.py admin add-user 123456789 --status Enable
```

ะะพะฑะฐะฒะปะตะฝะธะต ัะตะผั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั:
```bash
python run_tools.py admin add-subject 123456789 "ะะฐะถะฝัะน ะพััะตั"
```

ะะฝัะตัะฐะบัะธะฒะฝะฐั ะพะฑะพะปะพัะบะฐ:
```bash
python run_tools.py system shell
```

### ะะพะผะฐะฝะดั Telegram-ะฑะพัะฐ

- `/start` - ะะฐัะฐัั ัะฐะฑะพัั ั ะฑะพัะพะผ
- `/status` - ะัะพะฒะตัะธัั ัะฒะพะน ััะฐััั ะธ ัะฟะธัะพะบ ัะตะผ
- `/reports` - ะะพะบะฐะทะฐัั ัะฟะธัะพะบ ะพััะปะตะถะธะฒะฐะตะผัั ัะตะผ
- `/enable` - ะะบะปััะธัั ัะฒะตะดะพะผะปะตะฝะธั
- `/disable` - ะัะบะปััะธัั ัะฒะตะดะพะผะปะตะฝะธั
- `/help` - ะะพะบะฐะทะฐัั ัะฟัะฐะฒะบั

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
Telegram_Mail-Bot/
โโโ data/                         # Data files directory
โโโ docs/                         # Documentation
โโโ logs/                         # Log files directory
โโโ scripts/                      # Scripts directory
โโโ src/                          # Source code
โ   โโโ cli/                      # Command line interface components
โ   โ   โโโ __init__.py
โ   โ   โโโ tools.py
โ   โโโ config/                   # Configuration files
โ   โ   โโโ __init__.py
โ   โ   โโโ settings.py
โ   โโโ core/                     # Core functionality
โ   โ   โโโ __init__.py
โ   โ   โโโ bot_status.py
โ   โ   โโโ email_handler.py
โ   โ   โโโ system.py
โ   โ   โโโ telegram_handler.py
โ   โโโ db/                       # Database operations
โ   โ   โโโ __init__.py
โ   โ   โโโ manager.py
โ   โ   โโโ tools.py
โ   โโโ utils/                    # Utility functions
โ   โ   โโโ __init__.py
โ   โ   โโโ cache_manager.py
โ   โ   โโโ logger.py
โ   โโโ web/                      # Web interface
โ       โโโ static/               # Static assets
โ       โ   โโโ css/
โ       โ   โโโ img/
โ       โ   โโโ js/
โ       โ   โโโ manifest.webmanifest
โ       โโโ templates/            # HTML templates
โ       โ   โโโ includes/
โ       โ   โ   โโโ header.html
โ       โ   โ   โโโ sidebar.html
โ       โ   โโโ 404.html
โ       โ   โโโ 500.html
โ       โ   โโโ add_user.html
โ       โ   โโโ base.html
โ       โ   โโโ bot_status.html
โ       โ   โโโ confirm_bulk_subjects.html
โ       โ   โโโ confirm_duplicate_subject.html
โ       โ   โโโ confirm_edit_subject.html
โ       โ   โโโ help.html
โ       โ   โโโ index.html
โ       โ   โโโ login.html
โ       โ   โโโ sql_console.html
โ       โ   โโโ user_details.html
โ       โ   โโโ users.html
โ       โโโ __init__.py
โ       โโโ admin.py
โโโ .env                          # Environment variables
โโโ .gitignore                    # Git ignore file
โโโ LICENSE                       # License file
โโโ README.md                     # Project documentation
โโโ requirements.txt              # Python dependencies
โโโ run_tools.py                  # Tool runner script

```

## ะะพะดะดะตัะถะบะฐ ะธ ัะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ ะธ ะปะพะณะพะฒ
```bash
# ะัะพะฒะตัะบะฐ ััะฐัััะฐ ัะธััะตะผั
python run_tools.py system status --detailed

# ะัะพัะผะพัั ะฟะพัะปะตะดะฝะธั ะพัะธะฑะพะบ
python run_tools.py system errors

# ะขะตััะธัะพะฒะฐะฝะธะต ัะพะตะดะธะฝะตะฝะธะน
python run_tools.py system check-connections
```
